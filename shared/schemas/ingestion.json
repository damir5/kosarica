{
  "$defs": {
    "GetStatsRequest": {
      "properties": {
        "from": {
          "type": "string"
        },
        "to": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "from",
        "to"
      ]
    },
    "GetStatsResponse": {
      "properties": {
        "buckets": {
          "items": {
            "$ref": "#/$defs/StatsBucket"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "buckets"
      ]
    },
    "IngestionError": {
      "properties": {
        "id": {
          "type": "string"
        },
        "runId": {
          "type": "string"
        },
        "fileId": {
          "type": "string"
        },
        "chunkId": {
          "type": "string"
        },
        "entryId": {
          "type": "string"
        },
        "errorType": {
          "type": "string"
        },
        "errorMessage": {
          "type": "string"
        },
        "errorDetails": {
          "type": "string"
        },
        "severity": {
          "type": "string",
          "enum": [
            "warning",
            "error",
            "critical"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "id",
        "runId",
        "fileId",
        "chunkId",
        "entryId",
        "errorType",
        "errorMessage",
        "errorDetails",
        "severity",
        "createdAt"
      ]
    },
    "IngestionFile": {
      "properties": {
        "id": {
          "type": "string"
        },
        "runId": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "fileType": {
          "type": "string"
        },
        "fileSize": {
          "type": "integer"
        },
        "fileHash": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "processing",
            "completed",
            "failed"
          ]
        },
        "entryCount": {
          "type": "integer"
        },
        "processedAt": {
          "type": "string",
          "format": "date-time"
        },
        "metadata": {
          "type": "string"
        },
        "totalChunks": {
          "type": "integer"
        },
        "processedChunks": {
          "type": "integer"
        },
        "chunkSize": {
          "type": "integer"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "id",
        "runId",
        "filename",
        "fileType",
        "fileSize",
        "fileHash",
        "status",
        "entryCount",
        "processedAt",
        "metadata",
        "totalChunks",
        "processedChunks",
        "chunkSize",
        "createdAt"
      ]
    },
    "IngestionRun": {
      "properties": {
        "id": {
          "type": "string"
        },
        "chainSlug": {
          "type": "string"
        },
        "source": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "running",
            "completed",
            "failed"
          ]
        },
        "startedAt": {
          "type": "string",
          "format": "date-time"
        },
        "completedAt": {
          "type": "string",
          "format": "date-time"
        },
        "totalFiles": {
          "type": "integer"
        },
        "processedFiles": {
          "type": "integer"
        },
        "totalEntries": {
          "type": "integer"
        },
        "processedEntries": {
          "type": "integer"
        },
        "errorCount": {
          "type": "integer"
        },
        "metadata": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "id",
        "chainSlug",
        "source",
        "status",
        "startedAt",
        "completedAt",
        "totalFiles",
        "processedFiles",
        "totalEntries",
        "processedEntries",
        "errorCount",
        "metadata",
        "createdAt"
      ]
    },
    "ListChainsResponse": {
      "properties": {
        "chains": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "chains"
      ]
    },
    "ListErrorsRequest": {
      "properties": {
        "limit": {
          "type": "integer",
          "maximum": 100,
          "minimum": 1
        },
        "offset": {
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "limit",
        "offset"
      ]
    },
    "ListErrorsResponse": {
      "properties": {
        "errors": {
          "items": {
            "$ref": "#/$defs/IngestionError"
          },
          "type": "array"
        },
        "total": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "errors",
        "total"
      ]
    },
    "ListFilesRequest": {
      "properties": {
        "limit": {
          "type": "integer",
          "maximum": 100,
          "minimum": 1
        },
        "offset": {
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "limit",
        "offset"
      ]
    },
    "ListFilesResponse": {
      "properties": {
        "files": {
          "items": {
            "$ref": "#/$defs/IngestionFile"
          },
          "type": "array"
        },
        "total": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "files",
        "total"
      ]
    },
    "ListRunsRequest": {
      "properties": {
        "chainSlug": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "running",
            "completed",
            "failed"
          ]
        },
        "limit": {
          "type": "integer",
          "maximum": 100,
          "minimum": 1
        },
        "offset": {
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "chainSlug",
        "status",
        "limit",
        "offset"
      ]
    },
    "ListRunsResponse": {
      "properties": {
        "runs": {
          "items": {
            "$ref": "#/$defs/IngestionRun"
          },
          "type": "array"
        },
        "total": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "runs",
        "total"
      ]
    },
    "RerunRunRequest": {
      "properties": {
        "rerunType": {
          "type": "string",
          "enum": [
            "file",
            "chunk",
            "entry"
          ]
        },
        "targetId": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "rerunType",
        "targetId"
      ]
    },
    "StatsBucket": {
      "properties": {
        "label": {
          "type": "string"
        },
        "totalRuns": {
          "type": "integer"
        },
        "completed": {
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "running": {
          "type": "integer"
        },
        "pending": {
          "type": "integer"
        },
        "totalFiles": {
          "type": "integer"
        },
        "totalErrors": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "label",
        "totalRuns",
        "completed",
        "failed",
        "running",
        "pending",
        "totalFiles",
        "totalErrors"
      ]
    }
  },
  "$id": "https://kosarica.hr/schemas/ingestion.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "JSON Schema for ingestion API types generated from Go structs",
  "title": "Ingestion API Types"
}